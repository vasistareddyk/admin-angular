<div class="animated fadeIn">


    <div class="row" ng-controller="AddBlogs">
        <div class="col-md-12">
            <div class="card">
                <div class="card-header">
                    <strong>Basic Form</strong>Elements
                </div>
                <div class="card-body">
                    <form action="" method="post" enctype="multipart/form-data" class="form-horizontal">
                    <input type="hidden" name="banner_image" id="bannerimage" value="" ng-model="banner_image">
                        <div class="form-group row">
                            <label class="col-md-3 form-control-label">Static</label>
                            <div class="col-md-9">
                                <p class="form-control-static">Username</p>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="select" class="col-md-3 form-control-label">Blog Category</label>
                            <div class="col-md-9">
                                <select class="form-control form-control-sm" name="select" id="select" ng-model="blisterPackTemplateSelected" ng-change="changedValue(blisterPackTemplateSelected)">
                                    <option value="{{opt.id}}" ng-repeat="opt in blogCategories">{{opt.name}}</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-md-3 form-control-label" for="text-input">Title</label>
                            <div class="col-md-9">
                                <input type="text" id="text-input" name="text-input" class="form-control"  ng-model="title"/>
                                <span class="help-block">This is a help text</span>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-md-3 form-control-label" for="text-input">Slug</label>
                            <div class="col-md-9">
                                <input type="text" id="text-input" name="text-input" class="form-control" ng-model="slug">
                                <span class="help-block">This is a help text</span>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="select" class="col-md-3 form-control-label">Blog Category</label>
                            <div class="col-md-9">
                                <select class="form-control form-control-sm" name="select" id="select">
                                    <option value="0"> Default</option>
                                    <option value="0" >Dcoument</option>
                                    <option value="0" >youtube</option>
                                </select>
                            </div>
                        </div>            
                        <div class="form-group row">
                            <label class="col-md-3 form-control-label" for="textarea-input">Description</label>
                            <div class="col-md-9">
                                <textarea id="textarea-input" name="textarea-input" rows="9" class="form-control" ng-model="description"></textarea>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-md-3 form-control-label" for="select">Select</label>
                            <div class="col-md-9">
                                <select id="select" name="select" class="form-control">
                                    <option value="0">Please select</option>
                                    <option value="1">Option #1</option>
                                    <option value="2">Option #2</option>
                                    <option value="3">Option #3</option>
                                </select>
                            </div>
                        </div>                     
                        <div class="form-group row">
                            <label class="col-md-3 form-control-label" for="file-input">Banner image</label>
                            <div class="col-md-9">
                                <div class="banner-image-uploader"></div>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-md-3 form-control-label" for="file-input">Attachment</label>
                            <div class="col-md-9">
                             <div class="attachment-uploader"></div>
                         </div>
                     </div>
                     <div class="form-group row">
                        <label class="col-md-3 form-control-label" for="text-input">No of comments</label>
                        <div class="col-md-9">
                            <input type="text" id="text-input" name="text-input" class="form-control" ng-model="comments">
                            <span class="help-block">This is a help text</span>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-md-3 form-control-label" for="text-input">No of likes</label>
                        <div class="col-md-9">
                            <input type="text" id="text-input" name="text-input" class="form-control" ng-model="likes">
                            <span class="help-block">This is a help text</span>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-md-3 form-control-label" for="text-input">no of views</label>
                        <div class="col-md-9">
                            <input type="text" id="text-input" name="text-input" class="form-control" ng-model="views">
                            <span class="help-block">This is a help text</span>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-md-3 form-control-label" for="text-input">H1 name</label>
                        <div class="col-md-9">
                            <input type="text" id="text-input" name="text-input" class="form-control" ng-model="h1name">
                            <span class="help-block">This is a help text</span>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-md-3 form-control-label" for="text-input">Meta Title</label>
                        <div class="col-md-9">
                            <input type="text" id="text-input" name="text-input" class="form-control" ng-model="metatitle">
                            <span class="help-block">This is a help text</span>
                        </div>
                    </div>
                    <div class="form-group row">
                            <label for="select" class="col-md-3 form-control-label">Author</label>
                            <div class="col-md-9">
                                <select class="form-control form-control-sm" name="select" id="select" ng-model="blogauthor" ng-change="changedAuthor(blogauthor)">
                                    <option value="{{aut.id}}" ng-repeat="aut in blogAuthors">{{aut.first_name}}</option>
                                </select>
                            </div>
                        </div>
                    <div class="form-group row">
                        <label class="col-md-3 form-control-label" for="text-input">Meta Descrition</label>
                        <div class="col-md-9">
                            <input type="text" id="text-input" name="text-input" class="form-control" ng-model="metadescription">
                            <span class="help-block">This is a help text</span>
                        </div>
                    </div>
                    <!-- <div class="form-group row">
                        <label class="col-md-3 form-control-label" for="select">Author</label>
                        <div class="col-md-9">
                            <select id="select" name="select" class="form-control">
                                <option value="0" ng-repeat="aut in blogAuthors">{{aut.first_name}}</option>
                            </select>
                        </div>
                    </div>  -->
                    <div class="form-group row">
                        <label class="col-md-3 form-control-label" for="select">Status</label>
                        <div class="col-md-9">
                            <select id="select" name="select" class="form-control">
                                <option value="0">Inactive</option>
                                <option value="1">Active</option>
                            </select>
                        </div>
                    </div>   
                </form>
            </div>
            <div class="card-footer">
                <button ng-click="SendData()"><i class="fa fa-dot-circle-o"></i> Submit</button>
                <button type="reset" class="btn btn-sm btn-danger"><i class="fa fa-ban"></i> Reset</button>
            </div>
        </div>            
    </div>

</div>

<!--/.row-->
</div>
<script type="text/template" id="banner-image-upload-template">
    <div class="qq-uploader-selector qq-uploader" qq-drop-area-text="Drop files here">
        <div class="qq-total-progress-bar-container-selector qq-total-progress-bar-container">
            <div role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" class="qq-total-progress-bar-selector qq-progress-bar qq-total-progress-bar"></div>
        </div>
        <div class="qq-upload-drop-area-selector qq-upload-drop-area" qq-hide-dropzone>
            <span class="qq-upload-drop-area-text-selector"></span>
        </div>
        <div class="qq-upload-button-selector qq-upload-button">
            <div>Upload a file</div>
        </div>
        <span class="qq-drop-processing-selector qq-drop-processing">
            <span>Processing dropped files...</span>
            <span class="qq-drop-processing-spinner-selector qq-drop-processing-spinner"></span>
        </span>
        <ul class="qq-upload-list-selector qq-upload-list" aria-live="polite" aria-relevant="additions removals">
            <li>
                <div class="qq-progress-bar-container-selector">
                    <div role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" class="qq-progress-bar-selector qq-progress-bar"></div>
                </div>
                <span class="qq-upload-spinner-selector qq-upload-spinner"></span>
                <img class="qq-thumbnail-selector" qq-max-size="100" qq-server-scale>
                <span class="qq-upload-file-selector qq-upload-file"></span>
                <span class="qq-edit-filename-icon-selector qq-edit-filename-icon" aria-label="Edit filename"></span>
                <input class="qq-edit-filename-selector qq-edit-filename" tabindex="0" type="text">
                <span class="qq-upload-size-selector qq-upload-size"></span>
                <button type="button" class="qq-btn qq-upload-cancel-selector qq-upload-cancel">Cancel</button>
                <button type="button" class="qq-btn qq-upload-retry-selector qq-upload-retry">Retry</button>
                <button type="button" class="qq-btn qq-upload-delete-selector qq-upload-delete">Delete</button>
                <span role="status" class="qq-upload-status-text-selector qq-upload-status-text"></span>
            </li>
        </ul>

        <dialog class="qq-alert-dialog-selector">
            <div class="qq-dialog-message-selector"></div>
            <div class="qq-dialog-buttons">
                <button type="button" class="qq-cancel-button-selector">Close</button>
            </div>
        </dialog>

        <dialog class="qq-confirm-dialog-selector">
            <div class="qq-dialog-message-selector"></div>
            <div class="qq-dialog-buttons">
                <button type="button" class="qq-cancel-button-selector">No</button>
                <button type="button" class="qq-ok-button-selector">Yes</button>
            </div>
        </dialog>

        <dialog class="qq-prompt-dialog-selector">
            <div class="qq-dialog-message-selector"></div>
            <input type="text">
            <div class="qq-dialog-buttons">
                <button type="button" class="qq-cancel-button-selector">Cancel</button>
                <button type="button" class="qq-ok-button-selector">Ok</button>
            </div>
        </dialog>
    </div>
</script>
<script>
    $(document).ready(function(){


       obj = $('form');

        // createUploader for banner image
        createUploader(obj.find('.banner-image-uploader'), {"validation":{"allowedExtensions":["gif","jpeg","jpg","png"],"acceptFiles":"image\/gif, image\/jpeg, image\/jpg, image\/png","sizeLimit":5000000000,"itemLimit":1},"extension":"* Allowed Extensions * Maximun size 500MB","storage_path":"media\/images\/"}, obj.find('input[name="banner_image"]'),  'banner-image-upload-template');

        // createUploader for attachment
        createUploader(obj.find('.attachment-uploader'), {"validation":{"allowedExtensions":["zip","rar","pdf"],"acceptFiles":"application\/zip, application\/x-zip, application\/x-zip-compressed, application\/octet-stream, application\/pdf","sizeLimit":5000000000,"itemLimit":1},"extension":"* Allowed Extensions(.zip) * Maximun size 500MB","storage_path":"blogs\/attachments\/"}, obj.find('input[name="attachment"]'), 'file-attachment-upload-template');

        // createUploader for blog video
        createUploader(obj.find('.blog-video-uploader'), {"validation":{"allowedExtensions":["mp4","avi","vmw"],"acceptFiles":"video\/*","sizeLimit":5000000000,"itemLimit":1},"extension":"* Allowed Extensions * Maximun size 500MB","storage_path":"media\/videos\/"}, obj.find('input[name="path"]'),  'blog-video-upload-template');

        // createUploader for blog document
        createUploader(obj.find('.blog-document-uploader'), {"validation":{"allowedExtensions":["doc","docx","pdf"],"acceptFiles":"application\/msword, application\/pdf","sizeLimit":5000000000,"itemLimit":1},"extension":"* Allowed Extensions * Maximun size 500MB","storage_path":"media\/docs\/"}, obj.find('input[name="path"]'),  'blog-document-upload-template');
        console.log(upload_name);
    });
// createUploader
var upload_name;
function createUploader(element, validationRules, objInputField, template)
{
        // Obj
        element.empty();

        // qq.s3.FineUploader
        template = new qq.s3.FineUploader({
            element: element[0],
            template: 'banner-image-upload-template',
            request: {
                endpoint: "https://prepo-demo-content.s3.amazonaws.com",
                accessKey: "AKIAIJHWXBALSA6AEVFA"
            },
            signature: {
                endpoint: "http://api.prepo.co.in/endpoint-cors.php",
            },
            uploadSuccess: {
                enabled: true,
                method: "POST",
                endpoint: "http://api.prepo.co.in/media",
                customHeaders: {
                    'P-AUTH-TOKEN' : "a0be8eab55a4dc88c40f12428946f133",
                }
            },
            iframeSupport: {
                localBlankPagePath: "play.html"
            },
            validation: validationRules.validation,
            retry: {
                enableAuto: true
            },
            chunking: {
                enabled: true
            },
            resume: {
                enabled: true
            },
            objectProperties: {
                key: function (fileId) {
                    filename = template.getName(fileId);
                    uuid = template.getUuid(fileId);
                    ext = filename.substr(filename.lastIndexOf('.') + 1);

                    return validationRules.storage_path  + uuid + '.' + ext;
                }
            },
            callbacks: {
                onError: function(id, name, errorReason, xhrOrXdr) {

                },
                onComplete: function(id, name, response) {

                    // Update key
                    if (response.success)
                      
                    upload_name = response.key;
                        obj.find('input[name="banner_image"]').val(response.key);
                        //objInputField.val(response.key);
                    }
                }
            });
    }

</script>
